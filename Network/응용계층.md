# DNS (Domain Name System)

- Internet에서의 ID (기계)
	- IP
		- IPv4
			- 32bit (xxx.xxx.xxx.xxx)
				- 8bit \* 4
				- 10진수
			- 약 40억개
		- IPv6
			- 128bit (xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx)
				- 16bit \* 8
				- 16진수
	- Domain Name
		- 순수하게 인간을 위한 시스템
		- www.naver.com
		- 응용 계층(인터넷 5계층)에서만 관여

---

- DNS
	- 도메인을 입력하면 거기에 해당하는 IP를 매핑해준다.

---

# Domain Name System

## 서비스

- Domain Name을 IP 주소로 바꿔주는 서비스.
- Aliasing 관리
	- 같은 곳(동일 IP)에 대해서 여러개의 주소(도메인)를 사용하게 하는 것.
	- ![[network_4_1.png]]

### 도메인 네임 서비스가 다른 응용 layer와 다른점

- 전우주적으로 중앙관리함.
- 계층적으로 분산 관리함.

## Domain Name Server의 계층

- 최상위 (Root Name Server)
	- Top level domain name server 관리
	- Top level domain
		- `.kr`, `.com`, `.edu`, `.org`, `.net` 등
	- 각 Top level domain에서 하위 도메인을 관리한다.
	- Top level Domain server의 IP를 유효기간 (TTL)과 함께 반환한다
		- 유효기간 동안은 동일한 top-level domain server IP를 요청하지 않는다.

### 계층 구조

authorized dns (공인된 dns)

- 각 Domain Name Server(Authorized DNS, Local DNS)는 cache를 가지고 있음.
	- Root NS나 Top Level Domain NS는 cache를 가지고 있지 않음
- 많이 물어보는 것에 대해서는 상위 계층으로 올라가지 않고도 알려줄 수 있도록함.

#### 도메인 네임 서비스를 받는 방법

1. recursive Domain Name resolution
	- 최근에는 동작하지 않음.
	- Root NS가 친절하다면,
		- 이 방식은 Root NS에 과부하가 발생할 수 있다.
		- ![[network_4_2.png]]
2. Iterative
	- ![[network_4_3.png]]
	- 하나하나 물어보면, 각 단계에 해당하는 domain name server를 알려준다.

https://demyank.tistory.com/231

![[network_4_4.png]]

- non-authoritative answer => server가 authoritative가 아니라는 의미
	- 인터넷 협회로부터 공인된 서버의 답변은 아니라는 의미.

![[network_4_5.png]]

---

![[network_4_6.png]]

![[network_4_7.png]]

![[network_4_8.png]]

![[network_4_9.png]]

![[network_4_10.png]]

### 동작 예시

`www.naver.com`

- 도메인 네임에 대해 궁금할때, 바로 Root Name Server에게 물어보지 않는다.
	- local name server에 물어보고 local name server는 자기의 상위에 있는 name server에게 물어본다. (계층화되어 있다.)

- Top-level domain에 `www.naver.com`을 물어봄
- Top-level domain은 `.com` domain server를 알려준다.

---

인터넷 5계층

운영체제는 user level과 kernel level로 나뉜다.
kernel 부분은 사용자가 함부로 접근하지 못한다.
응용계층 이외(전송, 네트워크, 데이터 링크, 물리)에는 kernel 계층에 있다.
응용계층(응용, 세션, 표현)은 응용 계층에 있다.

![[network_4_11.png]]

# P2P (peer-to-peer)

- 서버없이 단말(peer)들끼리 직접 상호간 서비스를 제공하는 시스템 (물물교환)

## 단점

- 서비스가 보장되지 않음.
- peer들은 ip를 바꾸며 옮겨다닐 수 있다.

## Hybrid System

- 서비스 메타 정보는 서버가 관리한다.
- 실제적 서비스는 peer끼리 한다.
- 서버를 통해 상대방의 위치 정보를 알아내고, 통신은 상대방과 나. 즉, peer끼리 통신한다.
- 예
	- skype, starcraft

## pure P2P

- 예
	- Torrent
	- bitcoin

- 문제
	- peer가 없다.
	- 신뢰할 수 없다.
	- **이기적일 수 있음**
		- 파일을 받기만하고 주지 않을 수 있다.
	- **조각들의 쏠림 현상.**
		- 모든 peer들이 같은 조각을 가지고 있을때, 전체 파일을 가지고 있는 peer의 연결이 끊어지면, 더 이상 파일을 받지 못한다.
- 해결
	- 인기있게 만들어야한다.
	- 해쉬 코드를 이용해서 해결한다.
	- 파일조각을 주는 시스템에 더 높은 우선순위를 준다.
	- 전체 네트워크를 봤을 때, 다른 peer들이 가지고 있지 않은 조각을 가져온다.

---

![[network_4_12.png]]

---

![[network_4_13.png]]

connection oriented (연결 지향)

---

UDP는 최대 2Kbyte 전송할 수 있음

(검증 필요)