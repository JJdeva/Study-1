# 1. 관계 데이터 연산의 개념

## A. 데이터 모델 = 데이터 구조 + 연산 + 제약조건

![](/bin/db_image/db_9_1.png)

## B. 관계 데이터 연산 (relational data operation)

- 관계 데이터 모델의 연산
- 원하는 데이터를 얻기 위해 **릴레이션에 필요한 처리 요구를 수행**하는 것
- 관계 대수와 관계 해석이 있음
	- 기능과 표현력 측면에서 능력이 동등함
	- **처리절차를 얼마나 자세히 기술하느냐에 따라 차이**를 보임

![](/bin/db_image/db_9_2.png)

- 관계 대수
	- 절차적 언어
	- 처리 과정에 초점을 맞춤
- 관계 해석
	- 비절차적 언어
	- 결과에 초점을 맞춤

## C. 관계 대수(relational algebra)의 개념

- **원하는 결과를 얻기 위해 릴레이션의 처리 과정을 순서대로 기술**하는 언어
	- 절차 언어 (procedural language)
- 릴레이션을 처리하는 연산자들의 모임
	- 대표 연산자 8개
	- **일반 집합 연산자**와 **순수 관계 연산자**로 분류됨
- 폐쇄 특성(closure property)이 존재함
	- 피연산자도 릴레이션이고 연산의 결과도 릴레이션임

# 2. 관계 대수

![](/bin/db_image/db_9_3.png)

## A. 일반 집합 연산자 (set operation)

- 릴레이션이 튜플의 집합이라는 개념을 이용하는 연산자

![](/bin/db_image/db_9_4.png)

![](/bin/db_image/db_9_5.png)

### a. 일반 집합 연산자의 특성

- 피연산자가 두 개 필요함
	- **두 개의 릴레이션을 대상**으로 연산을 수행
- **합집합, 교집합, 차집합**은 피연산자인 두 릴레이션이 합병이 가능해야 함
	- 합병 가능(union-compatible) 조건
		- 두 릴레이션의 **차수가 같아**야 함
		- 두 릴레이션에서 **서로 대응되는 속성의 도메인이 같아야** 함

![](/bin/db_image/db_9_6.png)

- 속성의 도메인(데이터 타입)이 달라서 합병 불가능.

### b. 일반 집합 연산자 - 합집합(union)

- 합병 가능한 두 릴레이션 $R$과 $S$의 합집합 $R \cup S$
	- 릴레이션 $R$에 속하거나 릴레이션 $S$에 속하는 모든 튜플로 결과 릴레이션 구성

![](/bin/db_image/db_9_7.png)

#### ㄱ. 결과 릴레이션의 특성

- 차수는 릴레이션 $R$과 $S$의 차수와 같음
- 카디널리티는 릴레이션 $R$과 $S$의 카디널리티를 더한 것과 같거나(중복이 없을 경우) 적어짐(중복이 있을 경우)

#### ㄴ. 교환적 특징이 있음

$R \cup S = S \cup R$

#### ㄷ. 결합적 특징이 있음

$(R \cup S) \cup T = R \cup (S \cup T)$

### c. 일반 집합 연산자 - 교집합(intersection)

- 합병 가능한 두 릴레이션 $R$과 $S$의 교집합 $R \cap S$
	- 릴레이션 $R$과 릴레이션 $S$에 속하는 모든 튜플로 결과 릴레이션 구성

![](/bin/db_image/db_9_8.png)

#### ㄱ. 결과 릴레이션의 특성

- 차수는 릴레이션 $R$과 $S$의 차수와 같음
- 카디널리티는 릴레이션 $R$과 $S$의 어떤 카디널리티보다 크지 않음

#### ㄴ. 교환적 특징이 있음

$R \cap S = S \cap R$

#### ㄷ. 결합적 특징이 있음

$(R \cap S) \cap T = R \cap (S \cap T)$

### d. 일반 집합 연산자 - 차집합(difference)

- 합병 가능한 두 릴레이션 $R$과 $S$의 차집합 $R - S$
	- 릴레이션 $R$에는 존재하고 릴레이션 $S$에는 존재하지 않는 튜플로 결과 릴레이션 구성

![](/bin/db_image/db_9_10.png)

#### ㄱ. 결과 릴레이션의 특성

- 차수는 릴레이션 $R$과 $S$의 차수와 같음
- $R-S$의 카디널리티는 릴레이션 $R$의 카디널리티와 같거나 적음
- $S-R$의 카디널리티는 릴레이션 $S$의 카디널리티와 같거나 적음

#### ㄴ. 교환적, 결합적 특징이 없음

### e. 일반 집합 연산자 - 카티션 프로덕트(cartesian product)

- 두 릴레이션 $R$과 $S$의 카티션 프로덕트 $R \times S$
	- 릴레이션 $R$에 속한 각 튜플과 릴레이션 $S$에 속한 각 튜플을 모두 연결하여 만들어진 새로운 튜플로 결과 릴레이션을 구성

![](/bin/db_image/db_9_11.png)

#### ㄱ. 결과 릴레이션의 특성

- 차수는 릴레이션 $R$과 $S$의 차수를 더한 것과 같음
- 카디널리티는 릴레이션 $R$과 $S$의 카디널리티를 곱한 것과 같음

#### ㄴ. 교환적 특징이 있음

$R \times S = S \times R$

#### ㄷ. 결합적 특징이 있음

$(R \times S) \times T = R \times (S \times T)$

## B. 순수 관계 연산자 (relational operation)

- 릴레이션의 구조와 특성을 이용하는 연산자

![](/bin/db_image/db_9_12.png)

![](/bin/db_image/db_9_13.png)

### a. 순수 관계 연산자 - 셀렉트(select)

- 릴레이션에서 **조건을 만족하는 튜플만 선택**하여 결과 릴레이션을 구성
- **하나의 릴레이션을 대상**으로 연산을 수행
- 수학적 표현법
	- $\sigma_{조건식}(릴레이션)$
- 데이터 언어적 표현법
	- 릴레이션 where 조건식
- 조건식
	- 비교식, 프레디킷(predicate)이라고도 함
	- 속성과 상수의 비교나 속성들 간의 비교로 표현
	- 비교연산자(>, <, <=, >=, =, !=)와 논리연산자($\vee$(AND), $\wedge$(OR), $\neg$(NOT))를 이용해 작성

![](/bin/db_image/db_9_14.png)

![](/bin/db_image/db_9_15.png)

![](/bin/db_image/db_9_16.png)

![](/bin/db_image/db_9_17.png)

#### ㄱ. 교환적 특징이 있음

![](/bin/db_image/db_9_18.png)

### b. 순수 관계 연산자 - 프로젝트(project)

- 릴레이션에서 선택한 속성의 값으로 결과 릴레이션을 구성
- 하나의 릴레이션을 대상으로 연산을 수행
- 수학적 표현법
	- $\pi_{속성리스트}(릴레이션)$
- 데이터 언어적 표현법
	- 릴레이션\[속성리스트\]

![](/bin/db_image/db_9_19.png)

![](/bin/db_image/db_9_20.png)

![](/bin/db_image/db_9_21.png)

### c. 순수 관계 연산자 - 조인(join)

- 조인 속성을 이용해 두 릴레이션을 조합하여 결과 릴레이션을 구성
- 조인 속성의 값이 같은 튜플만 연결하여 생성된 튜플을 결과 릴레이션에 포함
- 조인 속성
	- 두 릴레이션이 공통으로 가지는 속성
- 표현법
	- $릴레이션1 \Join 릴레이션2$
- 자연 조인(natural join)이라고도 함
	- 표현법
		- $릴레이션1 \Join_{N} 릴레이션2$

![](/bin/db_image/db_9_22.png)

![](/bin/db_image/db_9_23.png)

![](/bin/db_image/db_9_24.png)

### d. 순수 관계 연산자 - 디비전(division)

- 표현법
	- $릴레이션1 \div 릴레이션2$
- 릴레이션2의 모든 튜플과 관련이 있는 릴레이션1의 튜플로 결과 릴레이션을 구성
	- 단, 릴레이션1이 릴레이션2의 모든 속성을 포함하고 있어야 연산이 가능함

![](/bin/db_image/db_9_25.png)

![](/bin/db_image/db_9_26.png)

![](/bin/db_image/db_9_27.png)

## C. 관계 대수를 이용한 질의 표현 예

![](/bin/db_image/db_9_28.png)

![](/bin/db_image/db_9_29.png)

![](/bin/db_image/db_9_30.png)

![](/bin/db_image/db_9_31.png)
